import{a as H,f as C,j as e,p as T,r as l,B as d,S}from"./index-BgPfMftx.js";import{G as B}from"./GlobalModalContext-CEanKhtL.js";import{S as O}from"./chunk-YJYDBQZ3-DQH71ZyI.js";import{u as W}from"./useClickOutside-CuiuMGrl.js";import{M}from"./ModalContext-C2Fbkkgf.js";import{B as w}from"./chunk-UVUR7MCU-XGr7ouz6.js";import{c as q,a as R,u as $,o as U,H as V}from"./index.esm-F5rMhw4R.js";import{useCapslock as X}from"./CheckCapslock-B2pc3eFJ.js";import{a as Y}from"./axios-B4uVmeYG.js";import{v as A,b as D}from"./JwtTokenRotate-Du0PIfFb.js";import{L}from"./chunk-K7XRJ7NL-Bu74VLaG.js";import{F as _,I as F,a as J}from"./chunk-6CVSDS6C-qNJvPn8p.js";import{u as K,I as N}from"./chunk-FKYN3ZGE-B3QWMpSL.js";import{u as Q}from"./chunk-6RSEZNRH-DJ-mtPeE.js";import Z from"./Signup-BsvCD5Qu.js";import ee from"./ForgotPassword-CnJj2UbQ.js";import te from"./BookingForm-BTkcHIaC.js";import"./chunk-2GBDXOMA-DT3Pegqs.js";import"./chunk-DMO4EI7P-ffbJSNvT.js";import"./index-CxF79Cv8.js";import"./chunk-5PH6ULNP-DzDKoMfl.js";import"./index-VWaDGczM.js";import"./index-Bgli6ANI.js";import"./chunk-3Y4YXCR2-D1_PzN3D.js";import"./chunk-R3DH46PF-iWUMGBws.js";import"./chunk-2OOHT3W5-CJpRdX3-.js";import"./chunk-7ELO524Q-BClZfhVC.js";var se=H("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),x=C(function(i,n){var o,r;const{placement:a="left",...m}=i,f=K(),s=f.field,v={[a==="left"?"insetStart":"insetEnd"]:"0",width:(o=s==null?void 0:s.height)!=null?o:s==null?void 0:s.h,height:(r=s==null?void 0:s.height)!=null?r:s==null?void 0:s.h,fontSize:s==null?void 0:s.fontSize,...f.element};return e.jsx(se,{ref:n,__css:v,...m})});x.id="InputElement";x.displayName="InputElement";var P=C(function(i,n){const{className:o,...r}=i,a=T("chakra-input__left-element",o);return e.jsx(x,{ref:n,placement:"left",className:a,...r})});P.id="InputLeftElement";P.displayName="InputLeftElement";var I=C(function(i,n){const{className:o,...r}=i,a=T("chakra-input__right-element",o);return e.jsx(x,{ref:n,placement:"right",className:a,...r})});I.id="InputRightElement";I.displayName="InputRightElement";const oe=({children:t,backgroundColor:i="#ffffff"})=>{const{modalOpen:n,setModalOpen:o}=l.useContext(M),r=l.useRef();W([r],()=>{o(!1)});const a=m=>{o(m)};return e.jsx(e.Fragment,{children:n?e.jsx(d,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"1000",children:e.jsxs(d,{position:"relative",margin:"auto 0",backgroundColor:i,padding:"20px",borderRadius:"10px",zIndex:"100",ref:r,children:[e.jsx(d,{width:"fit-content",marginLeft:"auto",children:e.jsx(w,{backgroundColor:"#ffffff",onClick:()=>{a(!1)},children:e.jsx(O,{})})}),t]})}):null})},re=()=>{const[t,i]=l.useState(!1),[n,o]=l.useState(""),r=X();l.useContext(M);const a=q().shape({email:R().required("Please enter your email"),password:R().required("Please enter your password")}),{register:m,handleSubmit:f,watch:s,formState:{errors:g,isValid:v}}=$({mode:"onSubmit",resolver:U(a)}),y=s("email"),z=()=>i(!t),k=Q(),E=l.useRef();l.useEffect(()=>{const j=setTimeout(()=>{const u=[E],c=[y];u.forEach((p,h)=>{p.current&&p.current.value!==c[h]&&(p.current.value=c[h])})},100);return()=>clearTimeout(j)},[y]);const G=async j=>{try{const u={...j},c=await Y.post("http://localhost:5000/login2/login2",u,{withCredentials:!0,headers:{"Content-Type":"application/json"}});if(c.status===200){const p=c.data;localStorage.setItem("accessToken",p.accessToken);const h=A();D.set("X-CSRF-Token",h,{secure:!0,sameSite:"strict"}),k({title:"Login Success",description:"You will soon be redirected",status:"success",duration:2e3}),setTimeout(()=>{window.location.href="./"},2e3)}else c.status===400&&(o(c.statusText),k({title:"Login Failed",description:"Something Went Wrong",status:"error",duration:2e3}))}catch(u){console.error("Error:",u)}},{setModalState:b}=l.useContext(B);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{direction:"column",marginBottom:"2",justifyContent:"center",alignItems:"center",children:[e.jsx(V,{color:"teal.400",children:"Welcome"}),e.jsx(d,{minW:{base:"90%",md:"468px"},children:e.jsx("form",{onSubmit:f(G),children:e.jsxs(S,{spacing:4,p:"1rem",backgroundColor:"white",boxShadow:"md",children:[e.jsx(_,{children:e.jsx(N,{children:e.jsx(F,{type:"email",placeholder:"email address",ref:E,...m("email")})})}),e.jsxs(_,{children:[e.jsxs(N,{children:[e.jsx(F,{type:t?"text":"password",placeholder:"Password",...m("password")}),e.jsx(I,{width:"4.5rem",children:e.jsx(w,{h:"1.75rem",size:"sm",onClick:z,children:t?"Hide":"Show"})})]}),g.password&&e.jsx("p",{children:g.password.message}),n&&e.jsx("p",{children:n}),r&&e.jsx("p",{children:"Caps Lock is active!"}),e.jsx(S,{direction:"row",width:"100%",justifyContent:"end",children:e.jsx(J,{children:e.jsx(L,{onClick:()=>b("forgot"),children:"forgot password?"})})})]}),e.jsx(w,{borderRadius:0,type:"submit",variant:"solid",colorScheme:"teal",width:"full",children:"Login"})]})})})]}),e.jsx(d,{children:e.jsxs(d,{width:"fit-content",margin:"auto",children:["New to us?"," ",e.jsx(L,{color:"teal.500",onClick:()=>b("signup"),children:"Sign Up"})]})})]})},Ne=()=>{const{modalState:t}=l.useContext(B);return e.jsx(oe,{children:t==="login"?e.jsx(re,{}):t==="signup"?e.jsx(Z,{}):t==="forgot"?e.jsx(ee,{}):t==="reservation"?e.jsx(te,{}):null})};export{Ne as default};
